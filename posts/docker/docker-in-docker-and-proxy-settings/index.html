<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Configuring Proxy settings for a Docker-In-Docker Setup">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Docker-in-Docker And Proxy Settings | RC Notebook</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="https://ravi-chandran.github.io/posts/docker/docker-in-docker-and-proxy-settings/">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Ravi Chandran">
<link rel="prev" href="../docker-tricks-and-tips/" title="Docker Tricks And Tips" type="text/html">
<link rel="next" href="../../unity/unity-ml-agents-installation-for-windows/" title="Unity ML Agents Installation for Windows" type="text/html">
<meta property="og:site_name" content="RC Notebook">
<meta property="og:title" content="Docker-in-Docker And Proxy Settings">
<meta property="og:url" content="https://ravi-chandran.github.io/posts/docker/docker-in-docker-and-proxy-settings/">
<meta property="og:description" content="Configuring Proxy settings for a Docker-In-Docker Setup">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2019-12-21T00:00:00-05:00">
<meta property="article:tag" content="apt-get">
<meta property="article:tag" content="build system">
<meta property="article:tag" content="corkscrew">
<meta property="article:tag" content="docker">
<meta property="article:tag" content="docker-in-docker">
<meta property="article:tag" content="git">
<meta property="article:tag" content="npm">
<meta property="article:tag" content="proxy">
<meta property="article:tag" content="wget">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Header and menu bar -->
<div class="container">
      <header class="blog-header py-3"><div class="row nbb-header align-items-center">
          <div class="col-md-3 col-xs-2 col-sm-2" style="width: auto;">
            <button class="navbar-toggler navbar-light bg-light nbb-navbar-toggler" type="button" data-toggle="collapse" data-target=".bs-nav-collapsible" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse bs-nav-collapsible bootblog4-search-form-holder">
                
            </div>
        </div>
          <div class="col-md-6 col-xs-10 col-sm-10 bootblog4-brand" style="width: auto;">
            <a class="navbar-brand blog-header-logo text-dark" href="https://ravi-chandran.github.io/">
            <img src="../../../images/rcnotebooksmall.png" alt="RC Notebook" id="logo" class="d-inline-block align-top"></a>
          </div>
            <div class="col-md-3 justify-content-end align-items-center bs-nav-collapsible collapse flex-collapse bootblog4-right-nav">
            <nav class="navbar navbar-light bg-white"><ul class="navbar-nav bootblog4-right-nav">
<li class="nav-item">
    <a href="index.md" id="sourcelink" class="nav-link">Source</a>
    </li>


                    
            </ul></nav>
</div>
    </div>
</header><nav class="navbar navbar-expand-md navbar-light bg-white static-top"><div class="collapse navbar-collapse bs-nav-collapsible" id="bs-navbar">
            <ul class="navbar-nav nav-fill d-flex w-100">
<li class="nav-item">
<a href="../../../archive.html" class="nav-link">Archive</a>
                </li>
<li class="nav-item">
<a href="../../../categories/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="../../../rss.xml" class="nav-link">RSS feed</a>

                
            </li>
</ul>
</div>
<!-- /.navbar-collapse -->
</nav>
</div>

<div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Docker-in-Docker And Proxy Settings</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    Ravi Chandran
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2019-12-21T00:00:00-05:00" itemprop="datePublished" title="2019-12-21">2019-12-21</time></a>
            </p>
                <p class="commentline">
        
    <a href="#disqus_thread" data-disqus-identifier="cache/posts/docker/docker-in-docker-and-proxy-settings.html">Comments</a>


            
        </p>
<p class="sourceline"><a href="index.md" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Docker-in-Docker is explained by its author <a href="https://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/">here</a>. In a nutshell, the recommendation is to not use "true" Docker-in-Docker. Instead, use:</p>
<pre class="code literal-block"><span></span>docker container run --volume /var/run/docker.sock:/var/run/docker.sock ...
</pre>


<p>The above volume mapping provides the container with access to the Docker socket with which it can start more "sibling" containers. But the approach is not a "true" Docker-in-Docker (which is not recommended) and avoids its corresponding issues. The nice thing about this approach is it can work with any Docker image (with some additional items installed as explained in this post).</p>
<p>Here's a compilation of useful proxy settings that may be required if you work in an organization using proxies and require Docker-in-Docker for your work. In addition, I also outline how to update your Dockerfile so that the corresponding image can support this Docker-in-Docker approach. </p>
<!-- TEASER_END -->

<h2>Dockerfile Changes To Support Docker-in-Docker</h2>
<p>To add Docker-in-Docker, you'll need to update your Dockerfile to include the following. Note that <code>docker-ce</code> and <code>containerd.io</code> don't have to be installed. </p>
<pre class="code literal-block"><span></span><span class="c"># corkscrew is used for the git protocol through a HTTP CONNECT proxy</span>
<span class="c"># Per https://docs.docker.com/install/linux/docker-ce/ubuntu/ :</span>
<span class="c">#     apt-transport-https, ca-certificates, curl, gnupg-agent, software-properties-common</span>
<span class="k">RUN</span> apt-get update <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\</span>
        apt-transport-https <span class="se">\</span>
        ca-certificates <span class="se">\</span>
        corkscrew <span class="se">\</span>
        dos2unix <span class="se">\</span>
        gnupg-agent <span class="se">\</span>
        software-properties-common <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get -y autoremove <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get clean autoclean <span class="se">\</span>
    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/<span class="o">{</span>apt,dpkg,cache,log<span class="o">}</span> /tmp/* /var/tmp/*

<span class="c"># Install docker</span>
<span class="c"># https://github.com/docker/docker/blob/master/project/PACKAGERS.md#runtime-dependencies</span>
<span class="k">RUN</span> apt-get update <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\</span>
        iptables <span class="se">\</span>
        procps <span class="se">\</span>
        e2fsprogs <span class="se">\</span>
        xfsprogs <span class="se">\</span>
        xz-utils <span class="se">\</span>
        git <span class="se">\</span>
        kmod <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get -y autoremove <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get clean autoclean <span class="se">\</span>
    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/<span class="o">{</span>apt,dpkg,cache,log<span class="o">}</span> /tmp/* /var/tmp/*

<span class="c"># Reference: https://docs.docker.com/install/linux/docker-ce/ubuntu/</span>
<span class="c"># Add Dockerâ€™s official GPG key, verify fingerprint manually</span>
<span class="k">RUN</span> curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class="p">|</span> apt-key add - <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-key fingerprint 0EBFCD88 <span class="se">\</span>
    <span class="o">&amp;&amp;</span> add-apt-repository <span class="se">\</span>
        <span class="s2">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span>
<span class="s2">        </span><span class="k">$(</span>lsb_release -cs<span class="k">)</span><span class="s2"> \</span>
<span class="s2">        stable"</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get update <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get install -y <span class="se">\</span>
        docker-ce-cli <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get -y autoremove <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get clean autoclean <span class="se">\</span>
    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/<span class="o">{</span>apt,dpkg,cache,log<span class="o">}</span> /tmp/* /var/tmp/*
<span class="c"># Note: For docker-in-docker, don't install docker-ce, containerd.io</span>

<span class="c"># create non-root user:group, and generate a home directory to support SSH</span>
<span class="k">ARG</span> USER_NAME
<span class="k">RUN</span> adduser --disabled-password --gecos <span class="s1">''</span> <span class="si">${</span><span class="nv">USER_NAME</span><span class="si">}</span> <span class="se">\</span>
    <span class="o">&amp;&amp;</span> adduser <span class="si">${</span><span class="nv">USER_NAME</span><span class="si">}</span> sudo <span class="se">\</span>
    <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"</span><span class="si">${</span><span class="nv">USER_NAME</span><span class="si">}</span><span class="s2"> ALL=(ALL) NOPASSWD: ALL"</span> &gt;&gt; /etc/sudoers

<span class="c"># run container as non-root user from this point forward</span>
<span class="c"># so that build output owner is not root</span>
<span class="k">USER</span><span class="s"> ${USER_NAME}</span>

<span class="c"># if you need to use your SSH keys</span>
<span class="k">VOLUME</span><span class="s"> /home/${USER_NAME}/.ssh</span>

<span class="c"># contains docker-entrypoint.sh and setproxies.sh</span>
<span class="k">VOLUME</span><span class="s"> /scripts</span>

<span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">"/scripts/docker-entrypoint.sh"</span><span class="p">]</span>
</pre>


<h2>Running The Docker-in-Docker Container</h2>
<p>Let's assume that the Docker image is named <code>myproject:v1</code>. To start a container based on this image, run the following Bash script:</p>
<pre class="code literal-block"><span></span>docker container run                                    <span class="se">\</span>
    --volume /var/run/docker.sock:/var/run/docker.sock  <span class="se">\</span>
    --volume <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/common/scripts:/scripts             <span class="se">\</span>
    --volume /home/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>/.ssh:/home/<span class="si">${</span><span class="nv">USER</span><span class="si">}</span>/.ssh      <span class="se">\</span>
    --user <span class="k">$(</span>id -u <span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="k">)</span>:<span class="k">$(</span>id -g <span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="k">)</span>            <span class="se">\</span>
    --rm -it --name my_shell myproject:v1               <span class="se">\</span>
    <span class="p">|&amp;</span> tee <span class="nv">$BASH_SOURCE</span>.log
</pre>


<p>The volume mapping "<code>--volume /var/run/docker.sock:/var/run/docker.sock</code>" provides the container with access to the Docker socket to potentially create "sibling" containers.</p>
<p>We need to store multiple files for proxy configuration purposes. Let's place these files in the folder <code>$(pwd)/common/scripts</code>. The volume mapping "<code>--volume $(pwd)/common/scripts:/scripts</code>" maps this folder to <code>/scripts</code> inside the container. The files we will store in the folder <code>$(pwd)/common/scripts</code> are:</p>
<ul>
<li>
<code>docker-entrypoint.sh</code>: container entrypoint script</li>
<li>
<code>setproxies.sh</code>: proxy configuration script sourced by <code>docker-entrypoint.sh</code>
</li>
<li>
<code>01proxy</code>: <code>apt-get</code> proxy configuration file</li>
<li>
<code>git-proxy.sh</code>: <code>corkscrew</code> configuration file</li>
</ul>
<p>If you need to access your private repositories via SSH from the container, then the volume mapping for your SSH keys is needed.</p>
<p>I've explained the pipe "<code>|&amp; tee $BASH_SOURCE.log</code>" before in a <a href="../docker-tricks-and-tips/">previous post</a> containing multiple Docker tips and tricks. This line creates an output log from the container execution.</p>
<h2>Entrypoint Script (<code>docker-entrypoint.sh</code>)</h2>
<p>When the docker container is run, the script <code>docker-entrypoint.sh</code> specified in the Dockerfile <code>ENTRYPOINT</code> instruction is executed. This script should include the following:</p>
<pre class="code literal-block"><span></span><span class="ch">#!/usr/bin/env bash</span>

<span class="c1"># proxy settings</span>
<span class="nb">source</span> /scripts/setproxies.sh

<span class="c1"># add the user to the docker group</span>
<span class="nv">DOCKER_SOCKET</span><span class="o">=</span>/var/run/docker.sock
<span class="nv">DOCKER_GROUP</span><span class="o">=</span>docker
<span class="nv">USER</span><span class="o">=</span><span class="k">$(</span>whoami<span class="k">)</span>

<span class="k">if</span> <span class="o">[</span> -S <span class="si">${</span><span class="nv">DOCKER_SOCKET</span><span class="si">}</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nv">DOCKER_GID</span><span class="o">=</span><span class="k">$(</span>stat -c <span class="s1">'%g'</span> <span class="si">${</span><span class="nv">DOCKER_SOCKET</span><span class="si">}</span><span class="k">)</span>
    sudo addgroup --gid <span class="si">${</span><span class="nv">DOCKER_GID</span><span class="si">}</span> <span class="si">${</span><span class="nv">DOCKER_GROUP</span><span class="si">}</span>
    sudo usermod --append --groups <span class="si">${</span><span class="nv">DOCKER_GROUP</span><span class="si">}</span> <span class="si">${</span><span class="nv">USER</span><span class="si">}</span>
<span class="k">fi</span>

newgrp <span class="si">${</span><span class="nv">DOCKER_GROUP</span><span class="si">}</span>
</pre>


<p>The script invokes the <code>setproxies.sh</code> script which will be explained shortly. It then adds the user to the <code>docker</code> group. Finally, it uses the <code>newgrp</code> command to log the user into the <code>docker</code> group. In essence, we're executing these <a href="https://docs.docker.com/install/linux/linux-postinstall/">Docker post-install steps</a> here. I haven't found a way to do all of these steps within the Dockerfile itself which would have been more convenient.</p>
<h2>Proxy Settings Script (<code>setproxies.sh</code>)</h2>
<p>In the <code>docker-entrypoint.sh</code> script above, we source <code>setproxies.sh</code>. As its name implies, the script specifies the proxy configurations for some commonly used applications which don't seem to use the proxy settings from the environment (why not?). At least these were the ones I found were needed for the build system I was working on.</p>
<pre class="code literal-block"><span></span><span class="ch">#!/usr/bin/env bash</span>

<span class="c1"># Proxy info - update as appropriate based on your company</span>
<span class="nv">MY_PROXY_ADDR</span><span class="o">=</span>http://whatever_company_proxy.com
<span class="nv">MY_PROXY_PORT</span><span class="o">=</span><span class="m">999</span>
<span class="nv">MY_PROXY</span><span class="o">=</span><span class="nv">$MY_PROXY_ADDR</span>:<span class="nv">$MY_PROXY_PORT</span>

<span class="c1"># environment proxy settings</span>
<span class="nb">echo</span> <span class="s2">"Setting Proxies:"</span>
<span class="nb">echo</span> <span class="s2">"- environment"</span>
<span class="nb">export</span> <span class="nv">http_proxy</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">https_proxy</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">ftp_proxy</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">no_proxy</span><span class="o">=</span><span class="s2">"localhost,127.0.0.1"</span>
<span class="nb">export</span> <span class="nv">HTTP_PROXY</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">FTP_PROXY</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">NO_PROXY</span><span class="o">=</span><span class="s2">"localhost,127.0.0.1"</span>
<span class="nb">export</span> <span class="nv">ALL_PROXY</span><span class="o">=</span><span class="nv">$MY_PROXY</span>
<span class="nb">export</span> <span class="nv">all_proxy</span><span class="o">=</span><span class="nv">$MY_PROXY</span>

<span class="c1"># wget proxy configuration</span>
<span class="nb">echo</span> <span class="s2">"- wget"</span>
touch ~/.wgetrc
<span class="nb">echo</span> <span class="s2">"https_proxy = </span><span class="nv">$MY_PROXY</span><span class="s2">"</span> &gt; ~/.wgetrc
<span class="nb">echo</span> <span class="s2">"http_proxy = </span><span class="nv">$MY_PROXY</span><span class="s2">"</span> &gt;&gt; ~/.wgetrc
<span class="nb">echo</span> <span class="s2">"ftp_proxy = </span><span class="nv">$MY_PROXY</span><span class="s2">"</span> &gt;&gt; ~/.wgetrc
<span class="nb">echo</span> <span class="s2">"no_proxy = \"localhost,127.0.0.1\""</span> &gt;&gt; ~/.wgetrc
<span class="nb">echo</span> <span class="s2">"use_proxy = on"</span> &gt;&gt; ~/.wgetrc

<span class="c1"># npm proxy</span>
<span class="nb">echo</span> <span class="s2">"- npm"</span>
npm config <span class="nb">set</span> proxy <span class="nv">$MY_PROXY</span>
npm config <span class="nb">set</span> https-proxy <span class="nv">$MY_PROXY</span>

<span class="c1"># apt-get proxy</span>
<span class="nb">echo</span> <span class="s2">"- apt-get"</span>
sudo cp /scripts/01proxy /etc/apt/apt.conf.d/01proxy

<span class="c1"># using corkscrew</span>
<span class="nb">echo</span> <span class="s2">"- git proxies via corkscrew"</span>
chmod +x /scripts/git-proxy.sh
git config --global core.gitProxy /scripts/git-proxy.sh

<span class="c1"># cleanup</span>
<span class="nb">unset</span> MY_PROXY_ADDR
<span class="nb">unset</span> MY_PROXY_PORT
<span class="nb">unset</span> MY_PROXY
</pre>


<h3>Environment, <code>wget</code> and <code>npm</code> Proxy Settings</h3>
<p>We first initialize script variables for the proxy environment. These are <code>unset</code> at the end of the script to minimize "environmental pollution". Then we set <code>wget</code> and <code>npm</code> proxies.</p>
<h3>Proxy Setting For <code>apt-get</code>
</h3>
<p>For <code>apt-get</code>, I store the proxy settings in a file <code>01proxy</code> and copy it into <code>/etc/apt/apt.conf.d/01proxy</code>. Obviously, the contents of <code>01proxy</code> will depend on your organization's proxy settings. Typically, this file will have one or more lines of the format:</p>
<pre class="code literal-block"><span></span><span class="c">Acquire::http::Proxy "http://yourproxyaddress:proxyport/";</span>
</pre>


<p>If you have intra-organization mirrors for repositories, then you'll also need a line such as:</p>
<pre class="code literal-block"><span></span><span class="c">Acquire::http::Proxy::your_mirror_url DIRECT;</span>
</pre>


<h3>Proxy Setting For <code>git</code>
</h3>
<p>I found the method for git proxy configuration with the aid of <code>corkscrew</code> <a href="https://wiki.archlinux.org/index.php/HTTP_tunneling">here</a>. <code>corkscrew</code> is a tool for tunneling SSH through HTTP proxies. You'll need to create a file <code>git-proxy.sh</code> as shown below with your proxy information. The "<code>git config --global core.gitProxy /scripts/git-proxy.sh</code>" line in <code>setproxies.sh</code> specifies <code>git-proxy.sh</code> to be used for <code>corkscrew</code>-ing through the proxy to reach URLs starting with <code>git://</code>.</p>
<pre class="code literal-block"><span></span><span class="ch">#!/usr/bin/env bash</span>
<span class="c1"># reference: https://wiki.archlinux.org/index.php/HTTP_tunneling</span>
corkscrew http://yourproxyaddress proxyport <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
</pre>


<p>Besides <code>corkscrew</code>, other options for ways for handling <code>git</code> access exist. For example, if the <code>git://</code> protocol doesn't work and a GitHub mirror exists for the repository, you can directly specify substitutions using <code>git config</code> commands. Here are a couple of examples I've used:</p>
<pre class="code literal-block"><span></span>git config --global url.https://github.com/qemu/capstone.git/.insteadOf git://git.qemu.org/capstone.git
git config --global --add url.https://github.com/qemu/keycodemapdb.git/.insteadOf git://git.qemu.org/keycodemapdb.git
</pre>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/apt-get/" rel="tag">apt-get</a></li>
            <li><a class="tag p-category" href="../../../categories/build-system/" rel="tag">build system</a></li>
            <li><a class="tag p-category" href="../../../categories/corkscrew/" rel="tag">corkscrew</a></li>
            <li><a class="tag p-category" href="../../../categories/docker/" rel="tag">docker</a></li>
            <li><a class="tag p-category" href="../../../categories/docker-in-docker/" rel="tag">docker-in-docker</a></li>
            <li><a class="tag p-category" href="../../../categories/git/" rel="tag">git</a></li>
            <li><a class="tag p-category" href="../../../categories/npm/" rel="tag">npm</a></li>
            <li><a class="tag p-category" href="../../../categories/proxy/" rel="tag">proxy</a></li>
            <li><a class="tag p-category" href="../../../categories/wget/" rel="tag">wget</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../docker-tricks-and-tips/" rel="prev" title="Docker Tricks And Tips">Previous post</a>
            </li>
            <li class="next">
                <a href="../../unity/unity-ml-agents-installation-for-windows/" rel="next" title="Unity ML Agents Installation for Windows">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="rcnotebook",
            disqus_url="https://ravi-chandran.github.io/posts/docker/docker-in-docker-and-proxy-settings/",
        disqus_title="Docker-in-Docker And Proxy Settings",
        disqus_identifier="cache/posts/docker/docker-in-docker-and-proxy-settings.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="rcnotebook";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer">
            Contents Â© 2020         <a href="mailto:">Ravi Chandran</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<br><a rel="license" href="https://opensource.org/licenses/MIT">MIT License for Software, </a>
<a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons License CC BY 4.0 for other items</a>

            
            
        </footer>
</div>
</div>


        <script src="../../../assets/js/all-nocdn.js"></script><script src="../../../assets/js/moment-with-locales.min.js"></script><!-- fancy dates --><script>
        moment.locale("en");
        fancydates(2, "YYYY-MM-DD HH:mm");
        </script><!-- end fancy dates --><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
